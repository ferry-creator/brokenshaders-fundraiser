var d=null,f=null;class g{constructor(t,i,{chars:e=null,font_size:n=20,width:o,height:a,color:h,background:r}={width:null,height:null,color:null,background:null}){this._canvas=t,this._ctx=t.getContext("2d"),this._b=i,this._buffer=i.getContext("2d"),this._font_size=n,this._drops=[],this._color=h,this._background=r,this._chars=e||d.concat(f),this.resize(o,a)}random_char(){return m(this._chars)}render_char(t,i,e){this._ctx.fillText(t,i,e)}start(){let t=0;this._run=!0;const i=this;(function e(){t++%2===0&&i.render(),i._run&&requestAnimationFrame(e)})()}stop(){this._run=!1}reset(){for(let t=0;t<this._columns;t++)this._drops[t]=255}resize(t,i){this._width=t,this._height=i,this._canvas.width=t,this._b.width=t,setTimeout(()=>{this._canvas.height=i,this._b.height=i,this.reset()},0),this._columns=Math.round(t/this._font_size)}clear(){this._buffer.clearRect(0,0,this._width,this._height),this._buffer.globalAlpha=.94,this._buffer.drawImage(this._canvas,0,0),this._ctx.clearRect(0,0,this._width,this._height),this._ctx.drawImage(this._b,0,0),this._ctx.fillStyle=this._color,this._ctx.font=this._font_size+'px "VCR OSD mono"'}render(){this.clear();for(let t=0;t<this._drops.length;t++){const i=this.random_char(),e=t*this._font_size,n=this._drops[t]*this._font_size;this.render_char(i,e,n),n>this._height&&Math.random()>.975&&(this._drops[t]=0),this._drops[t]++}}}function w(s,t,{chars:i=null,font_size:e=14,exit:n=!0,color:o="#0F0",background:a="rgba(0, 0,0,0.05)"}={}){const h=new g(s,t,{font_size:e,chars:i,color:o,background:a,width:c(),height:l()});return window.addEventListener("resize",r=>{h.resize(c(),l())}),s.classList.add("running"),h.start(),n?new Promise(function(r){window.addEventListener("keydown",function(u){var _=u.key.toLowerCase();(_==="q"||_==="escape")&&(h.stop(),s.classList.remove("running"),setTimeout(r,0))})}):h}function m(s){return s[Math.floor(Math.random()*s.length)]}function c(){return window.innerWidth}function l(){return document.height!==void 0?document.height:document.body.offsetHeight}export{w as default};
